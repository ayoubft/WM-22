<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="css/style.css" />

    <!-- leaflet  -->
    <link rel="stylesheet" href="css/leaflet.css">
    <script src="js/leaflet.js"></script>
    <script src="//d3js.org/d3.v4.min.js"></script>
    <script src="//npmcdn.com/geotiff@0.3.6/dist/geotiff.js"></script> <!-- optional -->

    <!-- Plugin -->
    <script src="https://ihcantabria.github.io/Leaflet.CanvasLayer.Field/dist/leaflet.canvaslayer.field.js"></script>

    <!-- Color Palettes -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/chroma-js/2.4.2/chroma.min.js"></script>

    <!-- TensoFlow -->
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@1.5.2/dist/tf.min.js"></script>

    <title>Pr√©cipitation au Maroc</title>

    <!-- FAVICO -->
    <link rel="apple-touch-icon" sizes="180x180" href="favicon/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="favicon/favicon-16x16.png">
    <link rel="manifest" href="favicon/site.webmanifest">

</head>

<body onload="hideLoader()">
    <div id="loader"></div>
    <div class="container-fluid">
        <div class="mapbox">
            <div class="row-fluid some" id="map"></div>

            <div class="row-fluid overlay">

                <div class="box">
                    <br><br><br>
                    <button class="BTN" id="btnstatp"
                        onclick='hideDiv("divStations");hide_other_divs("divStations");'><b>üóº&emsp;Stations
                            m√©t√©orologiques</b></button>
                    <div id="divStations" class="DIV" style="display: none;" onclick="">
                        <hr>
                        <p style="font-size: 14px;">Une <b>station m√©t√©orologique</b>, parfois d√©sign√©e par synecdoque
                            <b>abri m√©t√©orologique</b>, est un ensemble de capteurs qui enregistrent et fournissent des
                            mesures physiques et des param√®tres m√©t√©orologiques li√©s aux variations du climat, ces
                            capteurs √©tant plac√©s dans un bo√Ætier, abri m√©t√©orologique qui r√©alise l'√©quilibre thermique
                            du thermom√®tre avec l'air et le prot√®ge du rayonnement solaire[1]. Les variables √† mesurer
                            sont la temp√©rature, la pression, la vitesse et direction du vent, l'hygrom√©trie, le point
                            de ros√©e, la pluviom√©trie, la hauteur et le type des nuages, le type et l'intensit√© des
                            pr√©cipitations ainsi que la visibilit√©. Les stations peuvent comporter des capteurs pour
                            toutes ou une partie seulement de ces informations, selon leur type : agro-m√©t√©orologique,
                            d‚Äôa√©roport, m√©t√©orouti√®re, climatologique, etc.
                        </p>
                        <button id="btnstatpluv" onclick="show_statpluv();">AFFICHER LES STATIONS
                            PLUVI√âOM√âTRIQUE</button>
                        <h3>üõà Cliquer sur chaque station pour plus d'informations.</h3>
                    </div>
                    <br>

                    <button class="BTN" id="btncom"
                        onclick='hideDiv("divcom");hide_other_divs("divcom");'><b>üåßÔ∏è&emsp;Pr√©cipitation par
                            commune</b></button>
                    <div id="divcom" class="DIV" style="display: none;">
                        <hr>
                        <p>La pr√©cipitation moyenne mensuelle par commune.</p>
                        <h4>Choix du mois de 2018: </h4>
                        <div class="custom-select">
                            <select id="slctmonth_com">
                                <option value="____">Choisir un mois:</option>
                                <option value="prec-1-18">Janvier 2018</option>
                                <option value="prec-2-18">F√©vrier 2018</option>
                                <option value="prec-3-18">Mars 2018</option>
                                <option value="prec-4-18">Avril 2018</option>
                                <option value="prec-5-18">Mai 2018</option>
                                <option value="prec-6-18">Juin 2018</option>
                                <option value="prec-7-18">Juillet 2018</option>
                                <option value="prec-8-18">Ao√ªt 2018</option>
                                <option value="prec-9-18">S√©ptembre 2018</option>
                                <option value="prec-10-18">Octobre 2018</option>
                                <option value="prec-11-18">Novembre 2018</option>
                                <option value="prec-12-18">D√©cembre 2018</option>
                            </select>
                        </div>
                    </div>
                    <br>

                    <button class="BTN" id="btncour"
                        onclick='hideDiv("divCours");hide_other_divs("divCours");'><b>üåä&emsp;Cours d'eau</b></button>
                    <div id="divCours" class="DIV" style="display: none;">
                        <hr>
                        <h2>Les cours d'eau au Maroc.</h2>

                        <button id="btnRiv" onclick="showRiv();">AFFICHER LES COURS D'EAU</button>
                    </div>
                    <br>

                    <button class="BTN" id="btnras"
                        onclick='hideDiv("divRaster");hide_other_divs("divRaster");'><b>üèÅ&emsp;Rasters</b></button>
                    <div id="divRaster" class="DIV" style="display: none;">
                        <hr>
                        Afficher le rendu des rasters de pr√©cipitations au Maroc.<br>
                        ATTENTION! Ca va prendre du temps!<br>
                        <h4>Choix de la palette: </h4>
                        <div class="custom-select-pal">
                            <select id="slctpal" style="width: 98%;">
                                <option value="Blues">Blues</option>
                                <option value="PuBu">PuBu</option>
                                <option value="BuPu">BuPu</option>
                                <option value="Spectral">Spectral</option>
                            </select>
                        </div>
                        <h4>Choix du mois de 2018: </h4>
                        <div class="custom-select-ras">
                            <select id="slctmonth_ras" style="width: 98%;">
                                <option value="____">Choisir un mois:</option>
                                <option value="2018_01.tif">Janvier 2018</option>
                                <option value="2018_02.tif">F√©vrier 2018</option>
                                <option value="2018_03.tif">Mars 2018</option>
                                <option value="2018_04.tif">Avril 2018</option>
                                <option value="2018_05.tif">Mai 2018</option>
                                <option value="2018_06.tif">Juin 2018</option>
                                <option value="2018_07.tif">Juillet 2018</option>
                                <option value="2018_08.tif">Ao√ªt 2018</option>
                                <option value="2018_09.tif">S√©ptembre 2018</option>
                                <option value="2018_10.tif">Octobre 2018</option>
                                <option value="2018_11.tif">Novembre 2018</option>
                                <option value="2018_12.tif">D√©cembre 2018</option>
                            </select>
                        </div>
                        <br>

                    </div>
                    <br>


                    <button class="BTN" id="btnreqNor"
                        onclick='hideDiv("divreq");hide_other_divs("divreq");'><b>üîé&emsp;Requ√™tes SQL</b></button>
                    <div id="divreq" class="DIV" style="display: none;">
                        <hr>
                        <h2>Entrer vos requ√™tes sql pour affichage attributaire en table ‚¨õ</h2>
                        <h3>Description des tables disponibles:</h3>
                        <table class="tg" style="table-layout: fixed; width: 286px">
                            <colgroup>
                                <col style="width: 95.75px">
                                <col style="width: 189.75px">
                            </colgroup>
                            <tbody>
                                <tr>
                                    <td class="tg-3gq2">Table</td>
                                    <td class="tg-xrgz"><span style="font-weight:bold">Columns</span></td>
                                </tr>
                                <tr>
                                    <td class="tg-clpl">aeroports<br></td>
                                    <td class="tg-2bev">id, geom, "OID_", "Name", "SymbolID", "AltMode", "Base",
                                        "Snippet",
                                        "PopupInfo", "HasLabel", "LabelID"</td>
                                </tr>
                                <tr>
                                    <td class="tg-clpl">communes</td>
                                    <td class="tg-2bev">id, geom, "OBJECTID", "NAME", "mean2018"</td>
                                </tr>
                                <tr>
                                    <td class="tg-clpl">maroc</td>
                                    <td class="tg-2bev">id, geom, "name", "descriptio"</td>
                                </tr>
                                <tr>
                                    <td class="tg-clpl">stations</td>
                                    <td class="tg-2bev">id, geom, "Code", "Nom", "Bassin", "Type"</td>
                                </tr>
                            </tbody>
                        </table>
                        <br>
                        <p>Ici essayer des requ√™tes comme:<br><br> <b>select id, "NAME", mean2018 from communes where
                                mean2018 >99</b><br><br>
                            <textarea name="text" rows="14" cols="10" wrap="soft" name="searchTxt" id="searchTxt2"
                                class="searchField"> </textarea>

                            <button id="btngetQuery2" style="width: 49%;" data-modal-target="#modal">QUERY</button>
                            <button id="btnRemQuery2" style="width: 49%;" onclick="clearQ2()">Clear</button>
                    </div>
                    <br>

                    <button class="BTN" id="btnq"
                        onclick='hideDiv("spatialQuery");hide_other_divs("spatialQuery");'><b>üåç&emsp;Requ√™tes spatiales
                            SQL</b></button>
                    <div id="spatialQuery" class="DIV" style="display: none;">
                        <hr>
                        <h3>Connection directe √† la base de donn√©es Postgres avec extension PostGIS</h3>
                        <p>Pour ces requ√™tes spatiales merci de fetcher la g√©ometrie sous forme de GeoJSON et
                            l'aliaser
                            <b>geom</b> comme : <b>ST_AsGeoJSON(geom) AS geom</b>
                        </p>
                        <h3>Description des tables disponibles:</h3>
                        <table class="tg" style="table-layout: fixed; width: 286px">
                            <colgroup>
                                <col style="width: 95.75px">
                                <col style="width: 189.75px">
                            </colgroup>
                            <tbody>
                                <tr>
                                    <td class="tg-3gq2">Table</td>
                                    <td class="tg-xrgz"><span style="font-weight:bold">Columns</span></td>
                                </tr>
                                <tr>
                                    <td class="tg-clpl">aeroports<br></td>
                                    <td class="tg-2bev">id, geom, "OID_", "Name", "SymbolID", "AltMode", "Base",
                                        "Snippet",
                                        "PopupInfo", "HasLabel", "LabelID"</td>
                                </tr>
                                <tr>
                                    <td class="tg-clpl">communes</td>
                                    <td class="tg-2bev">id, geom, "OBJECTID", "NAME", "mean2018"</td>
                                </tr>
                                <tr>
                                    <td class="tg-clpl">maroc</td>
                                    <td class="tg-2bev">id, geom, "name", "descriptio"</td>
                                </tr>
                                <tr>
                                    <td class="tg-clpl">stations</td>
                                    <td class="tg-2bev">id, geom, "Code", "Nom", "Bassin", "Type"</td>
                                </tr>
                            </tbody>
                        </table>
                        <p>Ici essayer des requ√™tes comme:<br><br> <b>SELECT id, ST_AsGeoJSON(geom) AS geom FROM
                                maroc</b><br><br>
                            <b>SELECT id,
                                ST_AsGeoJSON(geom) AS geom FROM communes WHERE mean2018 > 110</b><br><br>
                            <b>SELECT a.id, ST_AsGeoJSON(c.geom) AS geom FROM communes AS c, aeroports AS a WHERE
                                ST_Intersects(a.geom, c.geom)</b>
                        </p>

                        <textarea name="text" rows="14" cols="10" wrap="soft" name="searchTxt" id="searchTxt"
                            class="searchField"></textarea>

                        <button id="btngetQuery" style="width: 49%;">QUERY</button>
                        <button id="btnRemQuery" style="width: 49%;" onclick="clearQ()">Clear</button>
                    </div>
                    <br>

                    <button class="BTN" id="btnml"
                        onclick='hideDiv("divMl");hide_other_divs("divMl");'><b>üåÄ&emsp;Pr√©vision</b></button>
                    <div id="divMl" class="DIV" style="display: none;">
                        <hr>
                        <h2>!!‚ö†Ô∏è Exp√©rimental ‚ö†Ô∏è!!</h2>
                        <h3>Pr√©vision des pr√©cipitations mensuelles dans la commune de Khouribga</h3>
                        <h3>On suppose qu'on est en fin 2018 (selon les donn√©es qu'on a), on a entraine un mod√®le LSTM -
                            <a href="https://github.com/ayoubft/wm-22-project/blob/main/precipForeCasting/forecastPrecip-LSTM-1.ipynb"
                                target="_blank">savoir plus i√ßi</a> - √† partir des donn√©es √† partir de 2000 jusqu'√†
                            2018.
                        </h3>
                        <p>On va pr√©voir les pr√©cipitations <b>Janvier 2019</b>; mais normalement on aura la donn√©e
                            de chaque mois avant le mois actuelle et on va le pr√©voir.</p>
                        <p>Essayer avec n'importe quels 12 mois pour pr√©voir avec le mod√®le LSTM entra√Æn√©.</p>
                        <input type="number" id="m1" min="0" max="1000" placeholder="month -12">
                        <input type="number" id="m2" min="0" max="1000" placeholder="month -11">
                        <input type="number" id="m3" min="0" max="1000" placeholder="month -10">
                        <input type="number" id="m4" min="0" max="1000" placeholder="month -9">
                        <input type="number" id="m5" min="0" max="1000" placeholder="month -8">
                        <input type="number" id="m6" min="0" max="1000" placeholder="month -7">
                        <input type="number" id="m7" min="0" max="1000" placeholder="month -6">
                        <input type="number" id="m8" min="0" max="1000" placeholder="month -5">
                        <input type="number" id="m9" min="0" max="1000" placeholder="month -4">
                        <input type="number" id="m10" min="0" max="1000" placeholder="month -3">
                        <input type="number" id="m11" min="0" max="1000" placeholder="month -2">
                        <input type="number" id="m12" min="0" max="1000" placeholder="month -1">
                        <br><br>

                        <button id="btnFillMonths" style="width: 98%;">Remplir par donn√©es de 2018</button>
                        <br><br>
                        <button id="btnMl" style="width: 98%;">Pr√©voir le mois prochain</button>
                        <div class="center">
                            <h1 id="txtpredictionMl"></h1>
                        </div>
                    </div>
                    <br>

                    <button class="resetBTN" onclick='reset_all()'><b>‚ôæ reset</b></button>
                    <br>
                </div>

                <div class="box-2 header">üåßÔ∏è Pr√©cipitations au Maroc</div>

            </div>


        </div>
    </div>
    </div>
    </div>

    <div class="modal" id="modal">
        <div class="modal-header">
            <div class="title">Requ√™tes attributaires</div>
            <button data-close-button class="close-button">&times;</button>
        </div>
        <div class="modal-body" id="myTable">
        </div>
    </div>
    <div id="overlay"></div>

    <script src="data/p2018-12.js"></script>
    <script src="data/communes.js"></script>
    <script src="js/script.js"></script>
</body>

<script src="data/statpluv.js"></script>
<script src="data/coursDeau.js"></script>

</html>